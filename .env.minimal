# Zero-to-Running - Minimal Profile
# Profile: minimal
# Services: Backend API + PostgreSQL Database only
# Use Case: Fast backend-only development, API testing, debugging services independently
#
# Usage: make dev profile=minimal
#
# This profile starts only the essential services needed for backend development:
# - PostgreSQL database
# - Node.js Backend API
#
# Frontend and Redis are NOT started with this profile.
#
# Benefits:
# - Faster startup time (~30-45 seconds vs 60-90 seconds)
# - Lower resource usage (2 containers vs 4 containers)
# - Ideal for backend-focused work
#
# Tradeoffs:
# - Cannot test full-stack integration
# - No frontend UI available
# - No Redis caching (backend will use in-memory fallback if configured)
#
# To switch to full profile: make down && make dev profile=full

#==============================================================================
# Profile Configuration
#==============================================================================

# Current profile identifier
PROFILE=minimal

#==============================================================================
# Application Environment
#==============================================================================

NODE_ENV=development
APP_NAME=Zero-to-Running
APP_VERSION=1.0.0

#==============================================================================
# Service Ports
#==============================================================================

# Backend API service port
BACKEND_PORT=3001

# PostgreSQL database port
DATABASE_PORT=5432

# Node.js debug port (for debugging backend)
NODE_DEBUG_PORT=9229

# Frontend and Redis ports are not used in minimal profile
# but defined for completeness
FRONTEND_PORT=3000
REDIS_PORT=6379

#==============================================================================
# Database Configuration (PostgreSQL)
#==============================================================================

DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=zero_to_running_dev
DATABASE_USER=postgres

# ⚠️ MOCK SECRET - FOR DEVELOPMENT ONLY
DATABASE_PASSWORD=CHANGE_ME_postgres_123

DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}

# Database pool settings optimized for minimal profile
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=5

#==============================================================================
# Redis Configuration (NOT USED IN MINIMAL PROFILE)
#==============================================================================

# Redis is not started in minimal profile, but these are defined
# in case the backend code references them
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Note: Backend should gracefully handle Redis being unavailable
# or use in-memory fallback for caching in minimal profile

#==============================================================================
# Session Configuration
#==============================================================================

# ⚠️ MOCK SECRET - FOR DEVELOPMENT ONLY
SESSION_SECRET=CHANGE_ME_session_secret_32_character_minimum
SESSION_MAX_AGE=86400000

#==============================================================================
# Logging Configuration
#==============================================================================

# More verbose logging recommended for backend-focused development
LOG_LEVEL=DEBUG
LOG_FORMAT=pretty
LOG_LINES=100

# Frontend logging not applicable in minimal profile
VITE_LOG_LEVEL=INFO
VITE_LOG_INTERACTIONS=false

#==============================================================================
# CORS Configuration
#==============================================================================

# Allow backend API to be accessed directly
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

#==============================================================================
# API Configuration
#==============================================================================

API_BASE_PATH=/api
VITE_API_URL=http://localhost:3001

# More permissive rate limiting for development
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=200

REQUEST_TIMEOUT=30000

#==============================================================================
# Docker Configuration
#==============================================================================

COMPOSE_PROJECT_NAME=zero-to-running
DOCKER_NETWORK=zero-to-running-network
DOCKER_VOLUME_PREFIX=zero-to-running

# Docker Compose profile selection (used internally)
COMPOSE_PROFILES=minimal

#==============================================================================
# Development Tools
#==============================================================================

ENABLE_HOT_RELOAD=true
ENABLE_SOURCE_MAPS=false
VERBOSE_ERRORS=true
ENABLE_API_DOCS=true

#==============================================================================
# Security Settings
#==============================================================================

# ⚠️ MOCK SECRET - FOR DEVELOPMENT ONLY
JWT_SECRET=CHANGE_ME_jwt_secret_32_character_minimum
JWT_EXPIRATION=7d
BCRYPT_SALT_ROUNDS=10
ENABLE_HTTPS=false

#==============================================================================
# Feature Flags
#==============================================================================

ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_AUTO_SEED=false
ENABLE_HEALTH_CHECKS=true
ENABLE_METRICS=false

#==============================================================================
# Testing Configuration
#==============================================================================

TEST_DATABASE_URL=postgresql://postgres:test_password@localhost:5433/zero_to_running_test
TEST_REDIS_URL=redis://localhost:6380/0
MOCK_EXTERNAL_APIS=true

#==============================================================================
# Profile Notes
#==============================================================================

# MINIMAL PROFILE - Backend + Database Only
#
# Services Started:
#   ✓ PostgreSQL Database
#   ✓ Node.js Backend API
#   ✗ Frontend (Not Started)
#   ✗ Redis Cache (Not Started)
#
# Typical Startup Time: 30-45 seconds
# Memory Usage: ~400-600 MB
# CPU Usage: Low
#
# Best For:
#   - Backend API development
#   - Database schema changes
#   - API endpoint testing
#   - Backend debugging
#   - Backend unit/integration tests
#
# Not Suitable For:
#   - Full-stack development
#   - Frontend development
#   - End-to-end testing
#   - Testing Redis caching behavior
#
# To use full profile: make down && make dev profile=full
#==============================================================================
